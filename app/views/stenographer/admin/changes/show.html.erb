<section class="section">
  <div class="container">
    <h1 class="title">
      Change #<%= @change.id %>
    </h1>

    <h2 class="subtitle">
      <%= link_to 'Edit', edit_admin_change_path(@change.id) %>
      |
      <%= link_to 'Delete', admin_change_path(@change), :method => :delete, :data => { :confirm => 'Are you sure you want to delete this Change?' } %>
    </h2>

    <div class="field">
      <label class="label">Date</label>
      <div><%= @change.created_at.strftime('%m/%d/%Y') %></div>
    </div>

    <div class="field">
      <label class="label">Message</label>
      <div><%= @change.to_markdown %></div>
    </div>

    <div class="field">
      <label class="label">Source ID</label>
      <div><%= @change.source_id %></div>
    </div>

    <div class="field">
      <label class="label">Type</label>
      <div>
        <%= @change.change_type.present? ? @change.change_type.titleize : 'General' %>
      </div>
    </div>

    <div class="field">
      <label class="label">Environments</label>
      <div>
        <%= render partial: 'stenographer/shared/tags', locals: { tags: @change.environments_to_tags } %>
      </div>
    </div>

    <div class="field">
      <label class="label">Tracker IDs</label>
      <div>
        <% if @change.tracker_ids.present? %>
          <% @change.tracker_ids.split(',').each do |tracker_id| %>
            <%= tracker_id %>
          <% end %>
        <% else %>
          -
        <% end %>
      </div>
    </div>

    <div class="field">
      <%= link_to('Back', admin_changes_path, class: 'button is-link') %>
    </div>
  </div>
</section>
